{"version":3,"file":"static/js/658.c187d6e9.chunk.js","mappings":"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","sources":["store/selectors/samplesSelectors.ts","services/audioService.ts","workers/WebWorkerEnabler.ts","../node_modules/uuid/dist/esm-browser/rng.js","workers/CreateSampleWebWorker.js","workers/SampleViewWebWorker.js","utils/createSamples.ts","components/Canvas/Canvas.tsx","utils/detectBrowser.ts","components/CanvasList/CanvasList.tsx","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","webpack://react-client/./src/components/UserPackItem/UserPackItem.module.scss?8b2a","components/UserPackItem/UserPackItem.tsx","webpack://react-client/./src/pages/UserPacksPage/UserPacksPage.module.scss?1ab1","pages/UserPacksPage/UserPacksPage.tsx"],"sourcesContent":["import { RootState } from '../types';\n\nexport const selectSamplesMain = (state: RootState) => state.samples;\n// export const selectSamplesLoading = (state: RootState) => selectSamplesMain(state).loading;\nexport const selectSamplesFiles = (state: RootState) => selectSamplesMain(state).files;\nexport const selectPackId = (state: RootState) => selectSamplesMain(state).packId;\nexport const selectCurrentStep = (state: RootState) => selectSamplesMain(state).currentStep;\nexport const selectFiles = (state: RootState) => selectSamplesMain(state).files;\n\n","class AudioService {\n\tprivate filterData(audioBuffer: AudioBuffer) {\n\t\tconst rawData: Float32Array = audioBuffer.getChannelData(0);\n\t\tconst samples: number = 550;\n\t\tconst blockSize: number = Math.floor(rawData.length / samples);\n\t\tconst filteredData: number[] = [];\n\n\t\tfor (let i = 0; i < samples; i++) {\n\t\t\tlet blockStart: number = blockSize * i;\n\n\t\t\tlet sum: number = 0;\n\t\t\tfor (let j = 0; j < blockSize; j++) {\n\t\t\t\tsum = sum + Math.abs(rawData[blockStart + j]);\n\t\t\t}\n\t\t\tfilteredData.push(sum / blockSize);\n\t\t}\n\t\treturn filteredData;\n\t}\n\n\tprivate normalizeData(filteredData: number[]) {\n\t\tconst multiplier: number = 50 / Math.max(...filteredData);\n\t\treturn filteredData.map((n: number) => +((n * multiplier) + 1).toFixed());\n\t}\n\n\tsampleAudioData(buffer: AudioBuffer) {\n\t\treturn this.normalizeData(this.filterData(buffer));\n\t}\n}\nexport const audioService = new AudioService();\n","\nimport CreateSampleWebWorker from \"./CreateSampleWebWorker\";\nimport SampleViewWebWorker from \"./SampleViewWebWorker\";\n\nexport default class WebWorkerEnabler {\n\tconstructor(worker: any) {\n\t\tlet code = worker.toString();\n\t\tcode = code.substring(code.indexOf('{') + 1, code.lastIndexOf('}'));\n\n\t\tconst blob = new Blob([code], { type: 'application/javascript' });\n\t\n\t\treturn new Worker(URL.createObjectURL(blob));\n\t}\n}\n\nexport const workerInstanceCreateSample: any = new WebWorkerEnabler(CreateSampleWebWorker);\nexport const workerInstanceViewSample: any = new WebWorkerEnabler(SampleViewWebWorker);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default function CreateSampleWebWorker() {\n\tonmessage = (e) => {\n\t\tconst { audioCoordinates, audioFile, canvas, packId, cssCanvasWidth, cssCanvasHeight, dpr, fileId, duration } = e.data;\n\n\t\tconst ctx = e.data.canvas.getContext('2d');\n\n\t\tif (e.data.canvas === null) return;\n\t\n\t\tcanvas.width = cssCanvasWidth * dpr;\n\t\tcanvas.height = cssCanvasHeight * dpr;\n\n\t\tctx?.scale(dpr, dpr);\n\t\tctx?.translate(0, cssCanvasHeight / 2);\n\n\t\tconst barWidth = cssCanvasWidth / audioCoordinates.length;\n\n\t\tctx.strokeStyle = '#ADD8E6';\n\t\tctx.beginPath();\n\n\t\tfor (let i = 0; i < audioCoordinates.length; i++) {\n\t\t\tconst x = barWidth * i;\n\t\t\tlet barHeight = audioCoordinates[i];\n\t\t\tdrawLineSegment(ctx, x, barHeight, barWidth, canvas);\n\t\t}\n\n\t\tctx.stroke();\n\n\t\tcanvas.convertToBlob({ type: 'image/png' }).then((blob) => fileCreator(blob));\n\n\t\tfunction fileCreator(blob) {\n\t\t\tconst imageFile = new File([blob], 'png', { type: 'png' });\n\n\t\t\tpostMessage({ imageFile, audioFile, audioCoordinates, packId, fileId, duration });\n\t\t}\n\t};\n\n\tconst drawLineSegment = (ctx, x, barHeight, barWidth) => {\n\t\tctx.fillStyle = '#ADD8E6';\n\t\tctx.fillRect(x + barWidth / 2, -(barHeight / 2), 0.6, barHeight);\n\t};\n}\n","export default function SampleViewWebWorker() {\n\tonmessage = (e) => {\n\t\tconst { audioCoordinates, cssCanvasWidth, cssCanvasHeight, dpr } = e.data;\n\n\t\tconst ctx = e.data.canvas.getContext('2d');\n\t\tconst { canvas } = e.data;\n\n\t\tif (e.data.canvas === null) return;\n\n\t\tcanvas.width = cssCanvasWidth * dpr;\n\t\tcanvas.height = cssCanvasHeight * dpr;\n\n\t\tctx?.scale(dpr, dpr);\n\t\tctx?.translate(0, cssCanvasHeight / 2);\n\n\t\tconst barWidth = cssCanvasWidth / audioCoordinates.length;\n\t\tctx.strokeStyle = 'red';\n\t\tctx.beginPath();\n\n\t\tfor (let i = 0; i < audioCoordinates.length; i++) {\n\t\t\tconst x = barWidth * i;\n\n\t\t\tlet barHeight = audioCoordinates[i];\n\t\t\tdrawLineSegment(ctx, x, barHeight, barWidth);\n\t\t}\n\t\tpostMessage({ audioCoordinates });\n\t};\n\n\tconst drawLineSegment = (ctx, x, barHeight, barWidth) => {\n\t\t// ctx.moveTo(x, 0);\n\t\tctx.fillRect(x + barWidth / 2, -(barHeight / 2), 2, barHeight);\n\t\tctx.fillStyle = 'red';\n\t};\n}\n","import { samplesApi } from '@services/api/samplesApi';\nimport { CreateSampleRequestParams } from './../services/api/types';\nimport { CreateSampleResponseDto } from '@/services/api/types';\nimport { instance } from '../core/axios';\nimport { samplesToSendType } from '../store/slices/samples/types';\n\nexport const createSamples = async ({\n    imageFile,\n    audioFile,\n    audioCoordinates,\n    packId,\n    fileId,\n    duration,\n}: samplesToSendType) => {\n    try {\n        if (imageFile && audioFile) {\n            const formData = new FormData();\n            formData.append('image', imageFile);\n            formData.append('audio', audioFile);\n            formData.append('coordinates', JSON.stringify(audioCoordinates));\n            formData.append('duration', JSON.stringify(duration));\n\n            const data: CreateSampleResponseDto = await samplesApi.create({ packId, fileId }, formData).promise;\n            return data;\n        }\n    } catch (e) {\n        console.log(e);\n    }\n};\n","import { useEffect, useRef, FC } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectPackId } from '@selectors/samplesSelectors';\nimport { audioService } from '@services/audioService';\nimport { workerInstanceCreateSample } from '@workers/WebWorkerEnabler';\nimport { canvasSampleService } from '@services/canvasSampleService';\nimport { deleteSampleFiles } from '@slices/samples/samplesSlice';\nimport { createSamples } from '@utils/createSamples';\nimport { detectBrowser } from '@utils/detectBrowser';\nimport { useAppDispatch } from '@store/types';\n\ntype PropsType = {\n\tfile: File;\n\tfileId: string;\n};\n\nexport const Canvas: FC<PropsType> = ({ file, fileId }) => {\n\tconst packId = useSelector(selectPackId);\n\n\tconst browser = detectBrowser();\n\n\tconst dispatch = useAppDispatch();\n\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() => {\n\t\tconst reader: FileReader = new FileReader();\n\n\t\treader.readAsArrayBuffer(file);\n\n\t\treader.onload = async function() {\n\t\t\twindow.AudioContext = window.AudioContext || new window.webkitAudioContext();\n\n\t\t\tconst audioContext = new AudioContext();\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.readAsArrayBuffer(file);\n\n\t\t\treader.onload = function() {\n\t\t\t\tconst arrayBuffer: any = reader.result;\n\t\t\t\tif (!arrayBuffer) return;\n\t\t\t\taudioContext.decodeAudioData(arrayBuffer).then(async (buffer: AudioBuffer) => {\n\t\t\t\t\tconst audioCoordinates: any = audioService.sampleAudioData(buffer);\n\n\t\t\t\t\tif (browser === 'Safari') {\n\t\t\t\t\t\tconst canvas = canvasRef?.current;\n\t\t\t\t\t\tconst dataToSampleCreate = canvasSampleService.drawingCanvasToImage(\n\t\t\t\t\t\t\tfile,\n\t\t\t\t\t\t\taudioCoordinates,\n\t\t\t\t\t\t\tpackId,\n\t\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\t\tfileId,\n\t\t\t\t\t\t\tbuffer.duration,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (!dataToSampleCreate) return;\n\n\t\t\t\t\t\tconst id = await createSamples(dataToSampleCreate);\n\t\t\t\t\t\tif (!id) return;\n\t\t\t\t\t\tdispatch(deleteSampleFiles(id));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!canvasRef?.current) return;\n\t\t\t\t\t\tconst offscreen = canvasRef?.current.transferControlToOffscreen();\n\t\t\t\t\t\tworkerInstanceCreateSample.postMessage(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taudioFile: file,\n\t\t\t\t\t\t\t\taudioCoordinates,\n\t\t\t\t\t\t\t\tpackId,\n\t\t\t\t\t\t\t\tcanvas: offscreen,\n\t\t\t\t\t\t\t\tcssCanvasWidth: 550,\n\t\t\t\t\t\t\t\tcssCanvasHeight: 50,\n\t\t\t\t\t\t\t\tdpr: 2,\n\t\t\t\t\t\t\t\tfileId,\n\t\t\t\t\t\t\t\tduration: buffer.duration,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[offscreen],\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<canvas\n\t\t\t\tref={canvasRef}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: '550px',\n\t\t\t\t\theight: '35px',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n};\n","export const detectBrowser = (): string => {\n\tlet result: string = 'Other';\n\n\tconst detect = (browserName: string): number => {\n\t\treturn navigator.userAgent.indexOf(browserName);\n\t};\n\t\n\tif (detect('YaBrowser') !== -1) {\n\t\tresult = 'Yandex Browser';\n\t} else if (detect('Firefox') !== -1) {\n\t\tresult = 'Mozilla Firefox';\n\t} else if (detect('MSIE') !== -1) {\n\t\tresult = 'Internet Exploder';\n\t} else if (detect('Edge') !== -1) {\n\t\tresult = 'Microsoft Edge';\n\t} else if (detect('Safari') !== -1) {\n\t\tif (detect('Chrome') !== -1 && detect('Safari') !== -1) return 'Chrome';\n\t\tresult = 'Safari';\n\t} else if (detect('Opera') !== -1) {\n\t\tresult = 'Opera';\n\t}\n\n\treturn result;\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectSamplesFiles } from '@selectors/samplesSelectors';\nimport { Canvas } from '@components/Canvas';\n\nexport const CanvasList = () => {\n\tconst sampleFiles = useSelector(selectSamplesFiles);\n\treturn (\n\t\t<>\n\t\t\t{sampleFiles.map((files: { id: string; file: File }, idx: number) => {\n\t\t\t\tconst { file, id } = files;\n\t\t\t\treturn <Canvas file={file} fileId={id} key={idx} />;\n\t\t\t})}\n\t\t</>\n\t);\n};\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// extracted by mini-css-extract-plugin\nexport default {\"drop\":\"UserPackItem_drop__iQWB7\",\"dropSamples\":\"UserPackItem_dropSamples__bEFD2\",\"packCardWrapper\":\"UserPackItem_packCardWrapper__XeXuI\",\"packCard\":\"UserPackItem_packCard__nBKIZ\",\"playPauseCircle\":\"UserPackItem_playPauseCircle__V-24r\",\"changePage\":\"UserPackItem_changePage__UrzTT\",\"uploadSamples\":\"UserPackItem_uploadSamples__+sldL\"};","import { useRef, FC, DragEvent, ChangeEvent } from 'react';\nimport { useNavigate } from 'react-router';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { useAppDispatch } from '@store/types';\nimport { Pack } from '@store/slices/pack/types';\nimport { setSampleFiles } from '@slices/samples/samplesSlice';\nimport { useDropzone } from '@hooks/useDropzone';\nimport { ButtonLayout } from '@layouts/ButtonLayout';\nimport { IconLayout } from '@layouts/IconLayout';\n\nimport styles from './UserPackItem.module.scss';\n\ntype PackListProps = {\n    pack: Pack;\n    active?: boolean;\n    id: string;\n    index: number;\n};\n\nexport const UserPackItem: FC<PackListProps> = ({ pack, index, id }) => {\n    const { drag, setDrag, dragEnter, dragLeave } = useDropzone();\n\n    const ref = useRef<HTMLInputElement>(null);\n\n    const navigate = useNavigate();\n\n    const dispatch = useAppDispatch();\n\n    const onDrop = (e: DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const eventData = (e as React.DragEvent).dataTransfer;\n        let file = [eventData.files];\n        console.log(file);\n        setDrag(false);\n\n        Object.values(file[0]).forEach((file: File) => {\n            dispatch(setSampleFiles({ id: uuidv4(), file, packId: id }));\n        });\n    };\n\n    const onFileUpload = (e: ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files) {\n            Object.values(e.target.files).forEach((file: File) => {\n                dispatch(setSampleFiles({ id: uuidv4(), file, packId: id }));\n            });\n        }\n    };\n\n    return (\n        <div className={`${styles.packCardWrapper} ${styles.changePage}`}>\n            <div className={styles.packCard} onClick={() => navigate(`/profile-pack/${pack?._id}`)}>\n                <img src={`${pack.picture}`} alt=\"pack-cover\" />\n\n                <div>\n                    <div>{pack.genre}</div>\n                    <div style={{ fontSize: 12, color: 'gray' }}>{pack.name}</div>\n                </div>\n            </div>\n\n            <div className={styles.dropSamples}>\n                {!drag ? (\n                    <div onDragEnter={dragEnter} onDragLeave={dragLeave} onDragOver={dragEnter}>\n                        DOWNLOAD SAMPLES\n                    </div>\n                ) : (\n                    <div\n                        className={styles.drop}\n                        onDragEnter={dragEnter}\n                        onDragLeave={dragLeave}\n                        onDragOver={dragEnter}\n                        onDrop={onDrop}\n                    >\n                        DROP FILES\n                    </div>\n                )}\n            </div>\n            <div onClick={() => ref.current?.click()} className={styles.uploadSamples}>\n                <input\n                    type=\"file\"\n                    accept=\"audio/wav\"\n                    style={{ display: 'none' }}\n                    ref={ref}\n                    multiple\n                    onChange={onFileUpload}\n                />\n                <ButtonLayout typeStyle=\"download\">\n                    <IconLayout iconName=\"upload\" />\n                    DOWNLOAD SAMPLES\n                </ButtonLayout>\n            </div>\n        </div>\n    );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UserPacksPage_root__ICou2\",\"sampleLoader\":\"UserPacksPage_sampleLoader__kStO7\",\"packCardContainer\":\"UserPacksPage_packCardContainer__t5FQp\"};","import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { CanvasList } from '../../components/CanvasList/CanvasList';\nimport { UserPackItem } from '../../components/UserPackItem/UserPackItem';\nimport { selectUserPacks } from '../../store/selectors/packsSelectors';\nimport { selectFiles } from '../../store/selectors/samplesSelectors';\n\nimport { Pack } from '../../store/slices/pack/types';\nimport { deleteSampleFiles } from '../../store/slices/samples/samplesSlice';\nimport { createSamples } from '../../utils/createSamples';\nimport { workerInstanceCreateSample } from '../../workers/WebWorkerEnabler';\nimport { Loader } from '../../components/Loader/Loader';\nimport { Modal } from '../../layouts/ModalLayout/ModalLayout';\nimport { fetchGetUserPacks } from '../../store/slices/pack/actions';\nimport { useAppDispatch } from '../../store/types';\n\nimport styles from './UserPacksPage.module.scss';\n\nconst UserPacksPage = () => {\n    const userPacks = useSelector(selectUserPacks);\n    const files = useSelector(selectFiles);\n\n    const [activeModal, setActiveModal] = useState<boolean>(false);\n\n    const dispatch = useAppDispatch();\n\n    useEffect(() => {\n        if (files?.length) {\n            setActiveModal(true);\n        } else {\n            setActiveModal(false);\n        }\n    }, [files]);\n\n    useEffect(() => {\n        async function create(e: any) {\n            const { imageFile, audioFile, audioCoordinates, packId, fileId, duration } = e.data;\n\n            const id = await createSamples({ imageFile, audioFile, audioCoordinates, packId, fileId, duration });\n            if (!id) return;\n            dispatch(deleteSampleFiles(id));\n        }\n\n        workerInstanceCreateSample.addEventListener('message', create);\n\n        dispatch(fetchGetUserPacks());\n\n        return () => {\n            workerInstanceCreateSample.removeEventListener('message', create);\n        };\n    }, []);\n\n    return (\n        <div data-testid=\"user-packs-page\">\n            <div className={styles.root}>\n                <Modal setActive={setActiveModal} active={activeModal}>\n                    <Loader customColor=\"secondary\" />\n                </Modal>\n\n                {userPacks.map((pack: Pack, index: number) => (\n                    <div className={styles.packCardContainer} key={pack._id}>\n                        <UserPackItem pack={pack} id={pack._id} index={index} />\n                    </div>\n                ))}\n\n                <div></div>\n                <CanvasList />\n            </div>\n        </div>\n    );\n};\n\nexport default UserPacksPage;\n"],"names":["selectSamplesMain","state","samples","selectSamplesFiles","files","selectPackId","packId","selectFiles","AudioService","audioBuffer","rawData","getChannelData","blockSize","Math","floor","length","filteredData","i","blockStart","sum","j","abs","push","multiplier","max","map","n","toFixed","buffer","this","normalizeData","filterData","audioService","getRandomValues","WebWorkerEnabler","worker","code","toString","substring","indexOf","lastIndexOf","blob","Blob","type","Worker","URL","createObjectURL","workerInstanceCreateSample","onmessage","e","data","audioCoordinates","audioFile","canvas","cssCanvasWidth","cssCanvasHeight","dpr","fileId","duration","ctx","getContext","width","height","scale","translate","barWidth","strokeStyle","beginPath","x","barHeight","drawLineSegment","stroke","convertToBlob","then","imageFile","File","postMessage","fileCreator","fillStyle","fillRect","createSamples","formData","FormData","append","JSON","stringify","samplesApi","promise","console","log","Canvas","file","useSelector","browser","result","detect","browserName","navigator","userAgent","detectBrowser","dispatch","useAppDispatch","canvasRef","useRef","useEffect","reader","FileReader","readAsArrayBuffer","onload","window","AudioContext","webkitAudioContext","audioContext","arrayBuffer","decodeAudioData","sampleAudioData","current","dataToSampleCreate","canvasSampleService","id","deleteSampleFiles","offscreen","transferControlToOffscreen","ref","style","CanvasList","sampleFiles","idx","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","REGEX","byteToHex","substr","arr","offset","arguments","undefined","toLowerCase","validate","TypeError","options","buf","rnds","random","UserPackItem","pack","index","useDropzone","drag","setDrag","dragEnter","dragLeave","navigate","useNavigate","className","styles","onClick","_id","src","picture","alt","genre","fontSize","color","name","onDragEnter","onDragLeave","onDragOver","onDrop","preventDefault","stopPropagation","dataTransfer","Object","values","forEach","setSampleFiles","uuidv4","click","accept","display","multiple","onChange","target","ButtonLayout","typeStyle","IconLayout","iconName","userPacks","selectUserPacks","useState","activeModal","setActiveModal","create","addEventListener","fetchGetUserPacks","removeEventListener","setActive","active","Loader","customColor"],"sourceRoot":""}